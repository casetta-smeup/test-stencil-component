<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0">
  <title>Stencil Component Starter</title>
  <script src="/build/mycomponent.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Faker/3.1.0/faker.min.js"></script>

  <style>
    body {
      padding: 1rem;
    }

    .options {
      margin-bottom: 1rem;
    }
  </style>
</head>

<body>
  <div class="options">
    <div>
      <label for="rowsize">Number of rows</label>
      <input id="rowsize" type="number" value="1000">
      <button onclick="loadBigData()">Load big data</button>
    </div>

    <div>
      <label for="sort">Enable sort</label>
      <input type="checkbox" name="sort" id="sort" onchange="toggleMatSort(event)">
    </div>
  </div>

  <smeup-mat onCellClicked="console.log('test')"></smeup-mat>

  <p id="label"></p>

  <script>
    function loadBigData() {
      const bigColumns = new Array();

      for (let i = 0; i < 20; i++) {
        const column = {
          sortMode: "D"
        };
        column.code = "COL_" + i;
        column.text = "COL_" + i;

        bigColumns.push(column);
      }

      const bigRows = new Array();

      const inputValue = document.querySelector("input").value;
      console.log('input value', inputValue);

      for (let i = 0; i < inputValue; i++) {
        const row = {
          selected: false,
          fields: {}
        };

        // init fields
        bigColumns.forEach(c => {
          row.fields[c.code] = {
            name: c.code,
            smeupObject: {
              tipo: "",
              parametro: "",
              codice: faker.name.findName()
            }
          }

          row.fields['ID'] = {
            name: "ID",
            smeupObject: {
              tipo: "",
              parametro: "",
              codice: i
            }
          };
          row.fields['RowID'] = {
            name: "RowID",
            smeupObject: {
              tipo: "",
              parametro: "",
              codice: i
            }
          };
        });

        bigRows.push(row);
      }

      const table = document.querySelector("smeup-mat");
      table.columns = bigColumns;
      table.rows = bigRows;
    }

    function toggleMatSort(event) {
      document.querySelector("smeup-mat").sortable = event.target.checked;
    }

    const data = JSON.parse('{"type":"SmeupTable","messages":[],"columns":[{"IO":"B","aut":"","code":"STR001","dpy":"","fill":"","filterValue":"","grp":"GLUN(3;0)","lun":"3;0","ogg":"NR","sortMode":"A","text":"NR"},{"IO":"B","aut":"","code":"STR002","dpy":"","fill":"","filterValue":"","grp":"GLUN(3;1)","lun":"3;1","ogg":"NR","sortMode":"A","text":"NR"},{"IO":"B","aut":"","code":"STR003","dpy":"","fill":"","filterValue":"","grp":"GLUN(3;2)","lun":"3;2","ogg":"NR","sortMode":"A","text":"NR neg.(-n)"},{"IO":"B","aut":"","code":"STR004","dpy":"","fill":"","filterValue":"","grp":"GLUN(3;0)","lun":"3;0","ogg":"NR","sortMode":"A","text":"NR neg.(n-)"},{"IO":"B","aut":"","code":"STR006","dpy":"","fill":"","filterValue":"","grp":"GLUN(10;5)","lun":"10;5","ogg":"NR","sortMode":"A","text":"NR (dec.sep: ,)"},{"IO":"B","aut":"","code":"STR007","dpy":"","fill":"","filterValue":"","grp":"GLUN(15)","lun":"15","ogg":"CNCOL","sortMode":"A","text":"Oggetto"},{"IO":"H","aut":"","code":"STR008","dpy":"","fill":"","filterValue":"","grp":"GLUN(3;0)","lun":"3;0","ogg":"NR","sortMode":"A","text":"Oggetto"},{"IO":"B","aut":"","code":"STR009","dpy":"","fill":"","filterValue":"","grp":"GLUN(6;2)","lun":"6;2","ogg":"NRP","sortMode":"A","text":"Percentuale"}],"rows":[{"fields":{"STR008":{"name":"STR008","smeupObject":{"codice":"01","parametro":"","tipo":"NR"}},"STR007":{"name":"STR007","smeupObject":{"codice":"FIOGIA","parametro":"COL","tipo":"CN"}},"STR006":{"name":"STR006","smeupObject":{"codice":"1,102","parametro":"","tipo":"NR"}},"RowId":{"name":"RowId","smeupObject":{"codice":"0","parametro":"","tipo":"NR"}},"STR004":{"name":"STR004","smeupObject":{"codice":"1-","parametro":"","tipo":"NR"}},"STR003":{"name":"STR003","smeupObject":{"codice":"-1,12","parametro":"","tipo":"NR"}},"STR002":{"name":"STR002","smeupObject":{"codice":"1,1","parametro":"","tipo":"NR"}},"STR001":{"name":"STR001","smeupObject":{"codice":"005","parametro":"","tipo":"NR"}},"ID":{"name":"ID","smeupObject":{"codice":"1","parametro":"","tipo":"NR"}},"STR009":{"name":"STR009","smeupObject":{"codice":"20","parametro":"P","tipo":"NR"}}},"selected":false},{"fields":{"STR008":{"name":"STR008","smeupObject":{"codice":"02","parametro":"","tipo":"NR"}},"STR007":{"name":"STR007","smeupObject":{"codice":"SANCOS","parametro":"COL","tipo":"CN"}},"STR006":{"name":"STR006","smeupObject":{"codice":"2,1000","parametro":"","tipo":"NR"}},"RowId":{"name":"RowId","smeupObject":{"codice":"1","parametro":"","tipo":"NR"}},"STR004":{"name":"STR004","smeupObject":{"codice":"2-","parametro":"","tipo":"NR"}},"STR003":{"name":"STR003","smeupObject":{"codice":"-2,13","parametro":"","tipo":"NR"}},"STR002":{"name":"STR002","smeupObject":{"codice":"2,0","parametro":"","tipo":"NR"}},"STR001":{"name":"STR001","smeupObject":{"codice":"001","parametro":"","tipo":"NR"}},"ID":{"name":"ID","smeupObject":{"codice":"2","parametro":"","tipo":"NR"}},"STR009":{"name":"STR009","smeupObject":{"codice":"33,3","parametro":"P","tipo":"NR"}}},"selected":false},{"fields":{"STR008":{"name":"STR008","smeupObject":{"codice":"03","parametro":"","tipo":"NR"}},"STR007":{"name":"STR007","smeupObject":{"codice":"PARFRA","parametro":"COL","tipo":"CN"}},"STR006":{"name":"STR006","smeupObject":{"codice":"3,12345","parametro":"","tipo":"NR"}},"RowId":{"name":"RowId","smeupObject":{"codice":"2","parametro":"","tipo":"NR"}},"STR004":{"name":"STR004","smeupObject":{"codice":"3-","parametro":"","tipo":"NR"}},"STR003":{"name":"STR003","smeupObject":{"codice":"-3,14","parametro":"","tipo":"NR"}},"STR002":{"name":"STR002","smeupObject":{"codice":"3,1","parametro":"","tipo":"NR"}},"STR001":{"name":"STR001","smeupObject":{"codice":"001","parametro":"","tipo":"NR"}},"ID":{"name":"ID","smeupObject":{"codice":"3","parametro":"","tipo":"NR"}},"STR009":{"name":"STR009","smeupObject":{"codice":"0","parametro":"P","tipo":"NR"}}},"selected":false},{"fields":{"STR008":{"name":"STR008","smeupObject":{"codice":"01","parametro":"","tipo":"NR"}},"STR007":{"name":"STR007","smeupObject":{"codice":"FORFED","parametro":"COL","tipo":"CN"}},"STR006":{"name":"STR006","smeupObject":{"codice":"4,4","parametro":"","tipo":"NR"}},"RowId":{"name":"RowId","smeupObject":{"codice":"3","parametro":"","tipo":"NR"}},"STR004":{"name":"STR004","smeupObject":{"codice":"4-","parametro":"","tipo":"NR"}},"STR003":{"name":"STR003","smeupObject":{"codice":"-4,15","parametro":"","tipo":"NR"}},"STR002":{"name":"STR002","smeupObject":{"codice":"4,2","parametro":"","tipo":"NR"}},"STR001":{"name":"STR001","smeupObject":{"codice":"002","parametro":"","tipo":"NR"}},"ID":{"name":"ID","smeupObject":{"codice":"4","parametro":"","tipo":"NR"}},"STR009":{"name":"STR009","smeupObject":{"codice":"","parametro":"P","testo":"","tipo":"NR"}}},"selected":false},{"fields":{"STR008":{"name":"STR008","smeupObject":{"codice":"01","parametro":"","tipo":"NR"}},"STR007":{"name":"STR007","smeupObject":{"codice":"BELQUI","parametro":"COL","tipo":"CN"}},"STR006":{"name":"STR006","smeupObject":{"codice":"12,12","parametro":"","tipo":"NR"}},"RowId":{"name":"RowId","smeupObject":{"codice":"4","parametro":"","tipo":"NR"}},"STR004":{"name":"STR004","smeupObject":{"codice":"12-","parametro":"","tipo":"NR"}},"STR003":{"name":"STR003","smeupObject":{"codice":"-12,16","parametro":"","tipo":"NR"}},"STR002":{"name":"STR002","smeupObject":{"codice":"12","parametro":"","tipo":"NR"}},"STR001":{"name":"STR001","smeupObject":{"codice":"002","parametro":"","tipo":"NR"}},"ID":{"name":"ID","smeupObject":{"codice":"5","parametro":"","tipo":"NR"}},"STR009":{"name":"STR009","smeupObject":{"codice":"44","parametro":"P","tipo":"NR"}}},"selected":false},{"fields":{"STR008":{"name":"STR008","smeupObject":{"codice":"01","parametro":"","tipo":"NR"}},"STR007":{"name":"STR007","smeupObject":{"codice":"ROCMAT","parametro":"COL","tipo":"CN"}},"STR006":{"name":"STR006","smeupObject":{"codice":"13.123.213,012","parametro":"","tipo":"NR"}},"RowId":{"name":"RowId","smeupObject":{"codice":"5","parametro":"","tipo":"NR"}},"STR004":{"name":"STR004","smeupObject":{"codice":"13-","parametro":"","tipo":"NR"}},"STR003":{"name":"STR003","smeupObject":{"codice":"-13,00","parametro":"","tipo":"NR"}},"STR002":{"name":"STR002","smeupObject":{"codice":"13,4","parametro":"","tipo":"NR"}},"STR001":{"name":"STR001","smeupObject":{"codice":"002","parametro":"","tipo":"NR"}},"ID":{"name":"ID","smeupObject":{"codice":"6","parametro":"","tipo":"NR"}},"STR009":{"name":"STR009","smeupObject":{"codice":"66","parametro":"P","tipo":"NR"}}},"selected":false},{"fields":{"STR008":{"name":"STR008","smeupObject":{"codice":"01","parametro":"","tipo":"NR"}},"STR007":{"name":"STR007","smeupObject":{"codice":"MAEOLI","parametro":"COL","tipo":"CN"}},"STR006":{"name":"STR006","smeupObject":{"codice":"1.123.114,49","parametro":"","tipo":"NR"}},"RowId":{"name":"RowId","smeupObject":{"codice":"6","parametro":"","tipo":"NR"}},"STR004":{"name":"STR004","smeupObject":{"codice":"14-","parametro":"","tipo":"NR"}},"STR003":{"name":"STR003","smeupObject":{"codice":"-14,01","parametro":"","tipo":"NR"}},"STR002":{"name":"STR002","smeupObject":{"codice":"14,1","parametro":"","tipo":"NR"}},"STR001":{"name":"STR001","smeupObject":{"codice":"002","parametro":"","tipo":"NR"}},"ID":{"name":"ID","smeupObject":{"codice":"7","parametro":"","tipo":"NR"}},"STR009":{"name":"STR009","smeupObject":{"codice":"100","parametro":"P","tipo":"NR"}}},"selected":false},{"fields":{"STR008":{"name":"STR008","smeupObject":{"codice":"01","parametro":"","tipo":"NR"}},"STR007":{"name":"STR007","smeupObject":{"codice":"CARLUC","parametro":"COL","tipo":"CN"}},"STR006":{"name":"STR006","smeupObject":{"codice":"1.235,35999","parametro":"","tipo":"NR"}},"RowId":{"name":"RowId","smeupObject":{"codice":"7","parametro":"","tipo":"NR"}},"STR004":{"name":"STR004","smeupObject":{"codice":"35-","parametro":"","tipo":"NR"}},"STR003":{"name":"STR003","smeupObject":{"codice":"-35,02","parametro":"","tipo":"NR"}},"STR002":{"name":"STR002","smeupObject":{"codice":"35,0","parametro":"","tipo":"NR"}},"STR001":{"name":"STR001","smeupObject":{"codice":"002","parametro":"","tipo":"NR"}},"ID":{"name":"ID","smeupObject":{"codice":"8","parametro":"","tipo":"NR"}},"STR009":{"name":"STR009","smeupObject":{"codice":"1000","parametro":"P","tipo":"NR"}}},"selected":false},{"fields":{"STR008":{"name":"STR008","smeupObject":{"codice":"01","parametro":"","tipo":"NR"}},"STR007":{"name":"STR007","smeupObject":{"codice":"CASFRA","parametro":"COL","tipo":"CN"}},"STR006":{"name":"STR006","smeupObject":{"codice":"9.955,0000","parametro":"","tipo":"NR"}},"RowId":{"name":"RowId","smeupObject":{"codice":"8","parametro":"","tipo":"NR"}},"STR004":{"name":"STR004","smeupObject":{"codice":"55-","parametro":"","tipo":"NR"}},"STR003":{"name":"STR003","smeupObject":{"codice":"-55,03","parametro":"","tipo":"NR"}},"STR002":{"name":"STR002","smeupObject":{"codice":"55","parametro":"","tipo":"NR"}},"STR001":{"name":"STR001","smeupObject":{"codice":"001","parametro":"","tipo":"NR"}},"ID":{"name":"ID","smeupObject":{"codice":"9","parametro":"","tipo":"NR"}},"STR009":{"name":"STR009","smeupObject":{"codice":"55,22","parametro":"P","tipo":"NR"}}},"selected":false},{"fields":{"STR008":{"name":"STR008","smeupObject":{"codice":"01","parametro":"","tipo":"NR"}},"STR007":{"name":"STR007","smeupObject":{"codice":"DELGIO","parametro":"COL","tipo":"CN"}},"STR006":{"name":"STR006","smeupObject":{"codice":"121,0","parametro":"","tipo":"NR"}},"RowId":{"name":"RowId","smeupObject":{"codice":"9","parametro":"","tipo":"NR"}},"STR004":{"name":"STR004","smeupObject":{"codice":"121-","parametro":"","tipo":"NR"}},"STR003":{"name":"STR003","smeupObject":{"codice":"-121,0","parametro":"","tipo":"NR"}},"STR002":{"name":"STR002","smeupObject":{"codice":"121","parametro":"","tipo":"NR"}},"STR001":{"name":"STR001","smeupObject":{"codice":"001","parametro":"","tipo":"NR"}},"ID":{"name":"ID","smeupObject":{"codice":"10","parametro":"","tipo":"NR"}},"STR009":{"name":"STR009","smeupObject":{"codice":"20,11","parametro":"P","tipo":"NR"}}},"selected":false}]}');

    const mat = document.querySelector("smeup-mat");

    mat.columns = data.columns;
    mat.rows = data.rows;

    // add event listener for click events
    mat.addEventListener("onCellClicked", (event) => {
      const p = document.querySelector("#label");

      const cj = JSON.stringify(event.detail.c);
      const rj = JSON.stringify(event.detail.r);

      p.innerHTML = `Hai cliccato sulla colonna ${cj} <br /> della riga ${rj}`;
    })
  </script>
</body>

</html>